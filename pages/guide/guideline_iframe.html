<!--inline[../../tpl/common/iframe_head.tpl]-->
<h1>HTML和CSS设计模式</h1>
<h2>起源</h2>
<p>先来说说什么是设计模式，百度百科上有如下一段解释：</p>
<p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的；设计模式使代码编制真正工程化；设计模式是软件工程的基石脉络，如同大厦的结构一样。</p>
<p>虽然HTML和CSS是一种弱逻辑性的语言，但是也应该像高级编程语言一样遵循一定的规律和方法，使代码保持健壮性、可拓展性、可读性和可维护性。</p>
<p>本文档的设计模式是为本公司项目所设计，请严格遵循这种编码的思想，如有意见和建议请向本文档的作者提出并修订。</p>
<h1>CSS规范</h1>
<h2>CSS reset</h2>
<p>在开始CSS编码之前，有很多的CSS属性都必须被reset，避免浏览器出现各种兼容性问题。</p>
<p>推荐使用的CSS reset文件：</p>
<p><code>http://css2.pingan.com/app_css/g/base.css</code></p>
<h2>CSS文件编码</h2>
<p>统一使用<code>UTF-8</code>文件编码方式</p>

<h2>CSS文件引用</h2>

<ul>
    <li>一律使用link的方式调用外部样式</li>
    <li>不允许在页面中使用 <code>&lt;style&gt;</code> 块；</li>
    <li>不允许在 <code>&lt;style&gt;</code> 块中使用 <code>@import</code>；</li>
    <li>不允许使用 <code>style</code> 属性写行内样式。</li>
</ul>
<blockquote>一般情况下，在页面中只允许使用 <link /> 标签来引用CSS文件</blockquote>

<h2>CSS文件命名格式</h2>
<p>CSS文件命名用下划线做间隔</p>
<p>推荐命名要求：<strong>栏目/页面/活动名/类型+HTML页面名/CSS文件功能</strong></p>
<ul>
    <li>能描述实际意义的<b>英文单词</b></li>
    <li><b>首字符必须是英文字母，禁用其他符号或数字</b></li>
    <li><b>字母全部小写</b></li>
    <li>单词之间用<b>下划线</b>间隔</li>
    <li>命名要有实际意义，避免使用123，abc等无意义的名字，如test1.css, test2.css, abc.css</li>
</ul>
<p><b>推荐</b></p>
<p>例如两个注册的功能页，其中一个注册表单页，另外一个注册结果页，CSS文件分别命名成<code>register_form.css</code>和<code>register_result.css</code></p>
<p><b>不推荐</b></p>
<p><code>register_Form.css</code>，不推荐这种下划线与驼峰混搭的命名方式，因为加入驼峰并不会给我们代码带来什么好处，而且看起来并不那么fasion和简约</p>
<p><code>register1.css</code> <code>register2.css</code>，1和2不能表示实际意义，不便于后期的拓展性。如果到了下个版本，两个步骤中间再加一个注册步骤呢？再把<code>register2.css</code>改成<code>register3.css</code>，再新建一个<code>register2.css</code>吗？</p>

<h2>class命名规则</h2>
<ul>
    <li>能描述实际意义的<b>英文单词</b></li>
    <li><b>首字符必须是英文字母，禁用其他符号或数字</b></li>
    <li><b>字母全部小写</b></li>
    <li>单词之间用<b>下划线</b>间隔</li>
    <li>不允许使用拼音（约定俗成的除外，如：pingan, youku, baidu）,更不允许拼音和英文混搭(如：icon_tupian)</li>
    <li>命名要有实际意义，避免使用123，abc等无意义的名字，如.test1, .test2, .abc</li>
    <li>不依据表现形式来命名</li>
    <li>可根据内容来命名</li>
    <li>可根据功能来命名</li>
</ul>

<p><b>不推荐：</b></p>

<pre>left, right, center, red, black</pre>
<blockquote>如果某一天产品经理一拍脑袋，要求你把左边的内容换到右边，中间的换到左边，右边的换到中间，红色换成绿色，黑色换成白色，你是不是就傻了眼？你的class命名还有意义么？</blockquote>

<p><b>推荐：</b></p>

<pre>nav, aside, news, type, search</pre>
<p>PS.<b>为什么是下划线class命名方式？</b></p>
<ol>
    <li>为了与JS变量名驼峰命名方式有所区别，故不选驼峰命名。</li>
    <li>
        <p>减号分隔符用在JS里可能会造成误解和差错</p>
<pre>
var sub = 1;
var nav = 2;
var $demo = $("sub-nav");
</pre>
        <p>以上javascript代码，如果JQ选择器忘记加引号会是什么结果呢？可想而知，不是我们想要的结果。</p>
    </li>
    <li>下划线命名有点好处是：在很多编辑器里双击即可选中，而中划线则无法达到</li>
</ol>
<p>我们使用中划线 “-” 作为连接字符，而不是下划线 "_"。</p>
<p>本guideline规定用<b>下划线</b>"_"命名间隔,而不是驼峰或中划线"-",各种命名方式都有很多支持者，你肯定有千百个反驳的理由，“规范”是没有绝对权威绝对好的，我们只选择最合适的，请不要花过多时间纠结于此。</p>

<h2>class常用命名</h2>
<table>
    <tr>
        <th colspan="10">页面结构</th>
    </tr>
    <tr>
        <th>头</th>
        <th>尾</th>
        <th>侧栏</th>
        <th>页面主体</th>
        <th>栏</th>
        <th>内容</th>
        <th>容器</th>
        <th>布局</th>
        <th>模块</th>
        <th></th>
    </tr>
    <tr>
        <td>header</td>
        <td>footer</td>
        <td>sidebar</td>
        <td>main</td>
        <td>column/col</td>
        <td>content/cont</td>
        <td>container</td>
        <td>layout</td>
        <td>module/mod</td>
        <td></td>
    </tr>
    <tr>
        <th colspan="10">导航/菜单/模块</th>
    </tr>
    <tr>
        <th>导航</th>
        <th>主导航</th>
        <th>二级导航</th>
        <th>置顶导航</th>
        <th>侧边导航</th>
        <th>菜单/目录</th>
        <th>子菜单/二级菜单</th>
        <th>标题</th>
        <th>摘要</th>
        <th></th>
    </tr>
    <tr>
        <td>nav</td>
        <td>main_nav</td>
        <td>sub_nav</td>
        <td>top_nav</td>
        <td>side_nav</td>
        <td>menu</td>
        <td>sub_menu</td>
        <td>title</td>
        <td>summary</td>
        <td></td>
    </tr>
    <tr>
        <th colspan="10">功能</th>
    </tr>
    <tr>
        <th>标志</th>
        <th>一种广告</th>
        <th>登录</th>
        <th>注册</th>
        <th>搜索</th>
        <th>标题栏</th>
        <th>加入</th>
        <th>状态</th>
        <th>按钮</th>
        <th>滚动</th>
    </tr>
    <tr>
        <td>logo</td>
        <td>banner</td>
        <td>login</td>
        <td>regsiter/reg</td>
        <td>search</td>
        <td>title_bar</td>
        <td>join</td>
        <td>status</td>
        <td>btn</td>
        <td>scroll</td>
    </tr>
    <tr>
        <th>标签</th>
        <th>列表</th>
        <th>信息</th>
        <th>当前的</th>
        <th>提示</th>
        <th>图标</th>
        <th>记录</th>
        <th>详情</th>
        <th>标准</th>
        <th>服务</th>
    </tr>
    <tr>
        <td>tab</td>
        <td>list</td>
        <td>message/msg</td>
        <td>current/cur</td>
        <td>tips</td>
        <td>icon</td>
        <td>note</td>
        <td>detail</td>
        <td>guild</td>
        <td>service</td>
    </tr>
    <tr>
        <th>热点</th>
        <th>新消息</th>
        <th>下载</th>
        <th>投票</th>
        <th>搭档</th>
        <th>友链</th>
        <th>版权</th>
        <th>信息</th>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td>hot</td>
        <td>news</td>
        <td>download</td>
        <td>vote</td>
        <td>partner</td>
        <td>friend_links</td>
        <td>copyright</td>
        <td>info</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>

<h2>class和ID使用规则</h2>

<p>CSS一般只用class，ID留给javascript来调用</p>

<h2>CSS编码格式</h2>
<ul>
    <li>每个选择器后的CSS代码不要换行</li>
    <li>分号后保持一个空格</li>
    <li>冒号后保持一个空格</li>
    <li>如有多个选择器，每个选择器占一行</li>
    <li>多选择器后的逗号不加空格</li>
</ul>
<p><b>不推荐：</b></p>
<pre>
h1,h2,h3,h4{font-weight:normal;}
.mod_detail{ 
    width:400px; 
    height:300px; 
}
.mod_detail .current,.mod_detail .news,.mod_detail .content{ color:#000; }
</pre>
<p><b>推荐：</b></p>
<pre>
h1,
h2,
h3,
h4{font-weight:normal;}
.mod_detail{width: 400px; height: 300px;}
.mod_detail .current,
.mod_detail .news,
.mod_detail .content{color:#000;}
</pre>

<h2>命名空间前缀</h2>
<table>
    <tr>
        <th>前缀</th>
        <th>说明</th>
        <th>示例</th>
    </tr>
    <tr>
        <td>mod_</td>
        <td>模块命名前缀</td>
        <td>mod_nav_bar</td>
    </tr>
    <tr>
        <td>cell_</td>
        <td>通用元件命名前缀</td>
        <td>cell_news_list</td>
    </tr>
    <tr>
        <td>layout_</td>
        <td>页面布局框架命名前缀</td>
        <td>layout_col_a</td>
    </tr>
    <tr>
        <td>js_</td>
        <td>特为JS调用的命名，可以用于ID和class,不涉及CSS样式</td>
        <td>js_reg_submit 或 jsRegSubmit</td>
    </tr>
    <tr>
        <td>plug_</td>
        <td>JS插件模块命名，一整套包含HTML、CSS、JS的功能块，最外层DOM请带上命名空间前缀plug</td>
        <td>plug_popup, plug_slider</td>
    </tr>
</table>

<blockquote>
    模块化CSS代码，模块内所有元素必须继承自模块的最外层CSS命名空间，模块、元件、布局的命名必须拥有命名空间前缀.这样能有效的避免命名冲突，避免过多的全局class造成全局污染。
</blockquote>

<p><b>推荐：</b></p>
<pre>
.mod_detail .info { sRules; }
.mod_detail .current { sRules; }
.mod_detail .news { sRules; }
.mod_detail .content { sRules; }
</pre>

<p><b>不推荐：</b></p>
<pre>
.info { sRules; }
.current { sRules; }
.news { sRules; }
.content { sRules; }
</pre>

<h2>CSS文件注释</h2>
<div class="highlight">
<pre>
/**
    *@Description: 项目名称（可写中文）
    *@Author: xukai (建议用英文字母)
    *@Last Modify: xukai (2012-05-10)
*/
</pre>
</div>
<p>在CSS文件头部需要注明项目名称和说明、代码作者名、更新时间和作者名</p>
<h2>减少使用滤镜和表达式</h2>
<p>滤镜非常消耗性能，不推荐使用。</p>
<p>应该遵循一个原则：能用JS解决的问题不用CSS，能用CSS解决的问题不用JS。</p>
<p>CSS内嵌计算和表达式显然不是CSS擅长的事情，不建议写在CSS中，请尽量用JS的方式来解决。</p>
<h2>字体不要用中文来定义</h2>
<p>用英文字体名称。</p>
<p>例如：<code>font-family:'微软雅黑';</code> 不建议用这种写法，在长久的代码生命周期中，会造成不可预见的问题。比如某个同事某一天用了非UTF-8编码方式，中文可能是个乱码，更新CSS提交后就会造成BUG。</p>
<h2>每个class的CSS属性都写在一行</h2>
<p>以便于模块化的展现。</p>
<p>例如：</p>
<pre>
.mod_side_nav{float: left;margin-top: 20px;}
.mod_side_nav li{width: 200px; height: 20px;margin-bottom: 8px;}
.mod_side_nav li strong{font-size: 14px;}
.mod_side_nav a{font-size: 12px; line-height: 20px;display:block;padding-left: 10px;color: #999;border-left: 1px solid #FFF;}
.mod_side_nav a:hover{color: #333;border-left: 1px solid #F60;}
.mod_side_nav .sub_t{margin-left: 15px;}
</pre>
<p>如果每个属性换行，就是这样的：</p>
<div class="highlight">
<pre>
.mod_side_nav {float: left; margin-top: 20px;}
.mod_side_nav li {width: 200px; height: 20px; margin-bottom: 8px;}
.mod_side_nav li strong {font-size: 14px;}
.mod_side_nav a {font-size: 12px; line-height: 20px; display: block; padding-left: 10px; color: #999; border-left: 1px solid #FFF;}
.mod_side_nav a:hover {color: #333; border-left: 1px solid #F60;}
.mod_side_nav .sub_t {margin-left: 15px;}
</pre>
</div>
<p>这样代码的行数就会变的很多，比较难从纵向区分我们的模块化CSS代码。当然，我们会尊重你的个人习惯，如果你坚持觉得换行的写法比较舒服，那就多按回车键换行吧。</p>
<h2>CSS模块注释</h2>
<p>注释写在对应的模块上方，无换行。注释与上方的CSS模块空一行。</p>
<p><b>示例：</b></p>
<div class="highlight">
<pre>
/**
    @Name:模块名称
    @Level:级别(Global, Channel, Function)
    @Dependent:依赖关系,该模块必须依赖于何种模块
    @Sample:用法示例,或指出改模块所作用的直接页面
    @Explain:附加说明
    @Author:创建者 日期(两位数年月日时)
    @Last Modify:最终修改者 日期(两位数年月日时)
*/
.mod_side_nav{float: left;margin-top: 20px;}
.mod_side_nav li{width: 200px; height: 20px;margin-bottom: 8px;}
.mod_side_nav li strong{font-size: 14px;}
.mod_side_nav a{font-size: 12px; line-height: 20px;display:block;padding-left: 10px;color: #999;border-left: 1px solid #FFF;}
.mod_side_nav a:hover{color: #333;border-left: 1px solid #F60;}
.mod_side-nav .sub_t{margin-left: 15px;}
</pre>
</div>
<p><b>CSS定义的HTML模块是：</b></p>

<h2>CSS属性的书写顺序</h2>
<p>按照元素模型由外及内,由整体到细节书写,大致分为五组:</p>
<ol>
    <li>位置:position,left,right,float</li>
    <li>盒模型属性:display,margin,padding,width,height</li>
    <li>边框与背景:border,background</li>
    <li>段落与文本:line-height,text-indent,font,color,text-decoration,...</li>
    <li>其他属性:overflow,cursor,visibility,...</li>
</ol>
<p>之所以有这样的建议，一是为了统一书写代码的风格，二是能提升CSS渲染页面的效率（待考证）</p>

<h2>清浮动CSS</h2>
<p>对于IE浏览器使用<code>zoom:1</code>使盒子触发haslayout，可达到清浮动的目的。</p>
<p>对于非IE浏览器可以结合<code>:after</code>伪类达到清浮动的目的。</p>
<p><b>CSS代码：</b></p>
<pre>
.mod_demo{zoom:1;}
.mod_demo:after{display:block;clear:both;content:"";height:0;}
</pre>
<p><b>推荐的做法：</b></p>
<p>可以结合LESS或SASS预编译语言来编写干净的可维护性的CSS，在LESS里可以创建一个通用的mixin，如：</p> 
<pre>
.clearfix(){
    zoom:1;
    :after{display:block;clear:both;content:"";height:0;}
}
.mod_demo{
    .clearfix;
}
.mod_header{
    .clearfix;
}
.mod_footer{
    .clearfix;
}
</pre>
<p><b>不推荐做成公用类，将class赋值到HTML标签上，例如：</b></p>
<pre>
.clearfix{zoom:1;}
.clearfix:after{display:block; clear:both; content:""; height:0;}
</pre>
<pre>
&lt;div class="mod_reg clearfix"&gt;
    &lt;div class="side_bar"&gt;float left&lt;/div&gt;
    &lt;div class="content"&gt;float right&lt;/div&gt;
&lt;/div&gt;
</pre>
<p>更不推荐在HTML中添加空标签来清浮动，糟糕的做法：</p>
<pre>
.clear{clear:both;}
</pre>
<pre>
&lt;div class="mod_reg"&gt;
    &lt;div class="side_bar"&gt;float left&lt;/div&gt;
    &lt;div class="content"&gt;float right&lt;/div&gt;
    &lt;div class="clear">&lt;/div&gt;
&lt;/div&gt;
</pre>
<p>这样会“污染”HTML，给HTML添加无意义的空标签。</p>

<h2>CSS hack</h2>
<ul>
    <li>尽量不好使用hack，另可换一种方法来实现</li>
    <li>如果hack费用不可，请用一种比较靠谱的hack</li>
</ul>
<blockquote>
    使用hack，向后兼容性比较差，hack可能会被浏览器更新版本后修复
</blockquote>

<p><b>常用CSS hack：</b></p>

<pre>
.test {
　　　color: #000;       /* 所有浏览器 */
　　　color: #111\9;     /* 所有IE */
　　　color: #222\0;     /* IE8 及以上版本, 非Webkit内核的Opera */
　　　color: #333\9\0;   /* IE8 及以上版本 */
　　　color: #444\0/;    /* IE8 及以上版本 */
　　　*color: #666;      /* IE7和IE6 */
　　　_color: #777;      /* IE6 */
}
</pre>

<p><b>IE条件注释：</b></p>
<pre>
&lt;!--[if IE]&gt;用于 IE &lt;![endif]--&gt;
&lt;!--[if IE 6]&gt;用于 IE6 &lt;![endif]--&gt;
&lt;!--[if IE 7]&gt;用于 IE7 &lt;![endif]--&gt;
&lt;!--[if IE 8]&gt;用于 IE8 &lt;![endif]--&gt;
&lt;!--[if IE 9]&gt;用于 IE9 &lt;![endif]--&gt;
&lt;!--[if gt IE 6]&gt;用于 IE6 以上版本&lt;![endif]--&gt;
&lt;!--[if lte IE 7]&gt;用于 IE7或更低版本 &lt;![endif]--&gt;
&lt;!--[if gte IE 8]&gt;用于 IE8 或更高版本 &lt;![endif]--&gt;
&lt;!--[if lt IE 9]&gt;用于 IE9 以下版本&lt;![endif]--&gt;
&lt;!--[if !IE]&gt; --&gt;用于非 IE &lt;!-- &lt;![endif]--&gt;
</pre>
<ul>
    <li>lt ：就是Less than的简写，也就是小于的意思。</li>
    <li>lte ：就是Less than or equal to的简写，也就是小于或等于的意思。</li>
    <li>gt ：就是Greater than的简写，也就是大于的意思。</li>
    <li>gte：就是Greater than or equal to的简写，也就是大于或等于的意思。</li>
    <li>!：就是不等于的意思，跟javascript里的不等于判断符相同。</li>
</ul>

<h2>合理使用CSS选择器</h2>
<p><b>避免使用标签+class/ID类型的选择器</b></p>
<p><b>避免画蛇添足：</b></p>
<pre>
.mod_news div.hot{color: #F00;}
.mod_news li#list{color: #F00}
</pre>
<p><b>推荐化繁为简：</b></p>
<pre>
.mod_news .hot{color: #F00;}
.mod_news #list{color: #F00}  //规范规定CSS不要用ID命名，这里只是做个示例
</pre>

<p><b>避免选择器嵌套层级过深，建议控制在三层以内</b></p>

<p><b>不推荐：</b></p>
<pre>.mod_news .content .box .list .tips{color: #F00}</pre>

<p><b>推荐：</b></p>
<pre>.mod_news .content .tips{color: #F00}</pre>

<h2>属性缩写与拆分</h2>
<p><b>不推荐：</b></p>
<pre>
.mod_news{margin-left: 10px; margin-right: 20px; margin-bottom: 30px; margin-left: 40px;
</pre>
<p><b>推荐</b></p>
<pre>
.mod_news{margin:10px 20px 30px 40px;}
</pre>
<p><b>不推荐：</b></p>
<pre>
.mod_news{border-width: 1px; border-style: solid; border-color: #000 #000 #F60;}
</pre>
<p><b>推荐：</b></p>
<pre>
.mod_news{border: 1px solid #000; border-bottom-color: #F60;}
</pre>

<h2>背景图片</h2>
<h3>小图标必须合并</h3>
<p>通过CSS Sprite的方法将小图片合并成一张大背景图，减少HTTP请求数达到性能优化的目的，建议你使用工程化的方法，FIS工程化中自带的小图片自动合并优化功能，将为你减少很多工作量，给后期维护也带来许多方便。</p>
<h3>图片格式选择与优化</h3>
<ul>
    <li>色彩丰富的图片使用JPG格式，用photoshop输出，压缩比设置60-70%左右，保持不明显影响视觉效果为准</li>
    <li>色彩不丰富的图片，优先使用PNG8格式。</li>
    <li>除非是gif动画图片，请尽量少使用gif格式。</li>
    <li>对于使用到半透明滤镜的图片才使用PNG24格式，但要注意IE6的兼容性</li>
</ul>

<h2>编后语</h2>
<p>少说话，多做事，才能保持团队工作的高效。话少了，就需要更多默契，默契就从每个人遵守一致的规范而来。无需沟通就很熟悉他人的代码编写习惯，就像是自己写的，不至于看到不喜欢的代码而反感和抗拒。遵守一致的规范，有效减少沟通成本，提升代码质量，提升可维护性。编写规范、整洁、漂亮代码是我们一致的目标。</p>

<h1>HTML规范</h1>
<h1>javascript规范</h1>
<!--inline[../../tpl/common/iframe_foot.tpl]-->